import{s as Re,e as q,j as v,_ as F,r as _,a0 as je,z as J,w as Ie,G as re,T as we,x as ke}from"./index-BMXZjJfw.js";import{w as Me,P as ue,e as H,t as Te,b as O,d as S,Q as oe,S as ce,p as ge,s as V,T as D,c as U,U as he,V as Fe,W as De,k as xe,h as Ae,l as He,A as Z,n as be,o as ye,u as Pe,g as Le,X as fe,Y as Se,D as $e,q as Ee,F as Ne,R as Be,B as Ue,M as _e,K as Oe,N as We,L as qe,O as Xe}from"./ChartsOverlay-BtoXHRSZ.js";import{E as Ve}from"./table-BJ9O0aVw.js";import"@fortawesome/fontawesome-svg-core";import"./TableRow-BHg9EW-L.js";import"./Checkbox-D0vYSOc6.js";import"./MenuItem-CZMDMPpu.js";import"./Tooltip-D_fHSjTZ.js";function ze(e){return e.innerRadius}function Ge(e){return e.outerRadius}function Ke(e){return e.startAngle}function Ye(e){return e.endAngle}function Qe(e){return e&&e.padAngle}function Je(e,t,a,r,s,d,g,i){var m=a-e,l=r-t,n=g-s,R=i-d,u=R*m-n*l;if(!(u*u<H))return u=(n*(t-d)-R*(e-s))/u,[e+u*m,t+u*l]}function Q(e,t,a,r,s,d,g){var i=e-a,m=t-r,l=(g?d:-d)/V(i*i+m*m),n=l*m,R=-l*i,u=e+n,o=t+R,A=a+n,x=r+R,C=(u+A)/2,h=(o+x)/2,f=A-u,p=x-o,P=f*f+p*p,y=s-d,L=u*x-A*o,w=(p<0?-1:1)*V(De(0,y*y*P-L*L)),T=(L*p-f*w)/P,M=(-L*f-p*w)/P,j=(L*p+f*w)/P,I=(-L*f+p*w)/P,k=T-C,c=M-h,b=j-C,$=I-h;return k*k+c*c>b*b+$*$&&(T=j,M=I),{cx:T,cy:M,x01:-n,y01:-R,x11:T*(s/y-1),y11:M*(s/y-1)}}function ve(){var e=ze,t=Ge,a=U(0),r=null,s=Ke,d=Ye,g=Qe,i=null,m=Me(l);function l(){var n,R,u=+e.apply(this,arguments),o=+t.apply(this,arguments),A=s.apply(this,arguments)-ue,x=d.apply(this,arguments)-ue,C=ce(x-A),h=x>A;if(i||(i=n=m()),o<u&&(R=o,o=u,u=R),!(o>H))i.moveTo(0,0);else if(C>Te-H)i.moveTo(o*O(A),o*S(A)),i.arc(0,0,o,A,x,!h),u>H&&(i.moveTo(u*O(x),u*S(x)),i.arc(0,0,u,x,A,h));else{var f=A,p=x,P=A,y=x,L=C,w=C,T=g.apply(this,arguments)/2,M=T>H&&(r?+r.apply(this,arguments):V(u*u+o*o)),j=oe(ce(o-u)/2,+a.apply(this,arguments)),I=j,k=j,c,b;if(M>H){var $=he(M/u*S(T)),E=he(M/o*S(T));(L-=$*2)>H?($*=h?1:-1,P+=$,y-=$):(L=0,P=y=(A+x)/2),(w-=E*2)>H?(E*=h?1:-1,f+=E,p-=E):(w=0,f=p=(A+x)/2)}var B=o*O(f),X=o*S(f),z=u*O(y),G=u*S(y);if(j>H){var K=o*O(p),Y=o*S(p),ee=u*O(P),ae=u*S(P),N;if(C<ge)if(N=Je(B,X,ee,ae,K,Y,z,G)){var te=B-N[0],ne=X-N[1],ie=K-N[0],se=Y-N[1],de=1/S(Fe((te*ie+ne*se)/(V(te*te+ne*ne)*V(ie*ie+se*se)))/2),le=V(N[0]*N[0]+N[1]*N[1]);I=oe(j,(u-le)/(de-1)),k=oe(j,(o-le)/(de+1))}else I=k=0}w>H?k>H?(c=Q(ee,ae,B,X,o,k,h),b=Q(K,Y,z,G,o,k,h),i.moveTo(c.cx+c.x01,c.cy+c.y01),k<j?i.arc(c.cx,c.cy,k,D(c.y01,c.x01),D(b.y01,b.x01),!h):(i.arc(c.cx,c.cy,k,D(c.y01,c.x01),D(c.y11,c.x11),!h),i.arc(0,0,o,D(c.cy+c.y11,c.cx+c.x11),D(b.cy+b.y11,b.cx+b.x11),!h),i.arc(b.cx,b.cy,k,D(b.y11,b.x11),D(b.y01,b.x01),!h))):(i.moveTo(B,X),i.arc(0,0,o,f,p,!h)):i.moveTo(B,X),!(u>H)||!(L>H)?i.lineTo(z,G):I>H?(c=Q(z,G,K,Y,u,-I,h),b=Q(B,X,ee,ae,u,-I,h),i.lineTo(c.cx+c.x01,c.cy+c.y01),I<j?i.arc(c.cx,c.cy,I,D(c.y01,c.x01),D(b.y01,b.x01),!h):(i.arc(c.cx,c.cy,I,D(c.y01,c.x01),D(c.y11,c.x11),!h),i.arc(0,0,u,D(c.cy+c.y11,c.cx+c.x11),D(b.cy+b.y11,b.cx+b.x11),h),i.arc(b.cx,b.cy,I,D(b.y11,b.x11),D(b.y01,b.x01),!h))):i.arc(0,0,u,y,P,h)}if(i.closePath(),n)return i=null,n+""||null}return l.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,R=(+s.apply(this,arguments)+ +d.apply(this,arguments))/2-ge/2;return[O(R)*n,S(R)*n]},l.innerRadius=function(n){return arguments.length?(e=typeof n=="function"?n:U(+n),l):e},l.outerRadius=function(n){return arguments.length?(t=typeof n=="function"?n:U(+n),l):t},l.cornerRadius=function(n){return arguments.length?(a=typeof n=="function"?n:U(+n),l):a},l.padRadius=function(n){return arguments.length?(r=n==null?null:typeof n=="function"?n:U(+n),l):r},l.startAngle=function(n){return arguments.length?(s=typeof n=="function"?n:U(+n),l):s},l.endAngle=function(n){return arguments.length?(d=typeof n=="function"?n:U(+n),l):d},l.padAngle=function(n){return arguments.length?(g=typeof n=="function"?n:U(+n),l):g},l.context=function(n){return arguments.length?(i=n??null,l):i},l}function W(e,t){if(typeof e=="number")return e;if(e==="100%")return t;if(e.endsWith("%")){const a=Number.parseFloat(e.slice(0,e.length-1));if(!Number.isNaN(a))return a*t/100}if(e.endsWith("px")){const a=Number.parseFloat(e.slice(0,e.length-2));if(!Number.isNaN(a))return a}throw new Error(`MUI X: Received an unknown value "${e}". It should be a number, or a string with a percentage value.`)}const Ze=["classes","color","cornerRadius","dataIndex","endAngle","id","innerRadius","isFaded","isHighlighted","onClick","outerRadius","paddingAngle","startAngle","highlightScope"];function ea(e){return ye("MuiPieArc",e)}xe("MuiPieArc",["root","highlighted","faded"]);const aa=e=>{const{classes:t,id:a,isFaded:r,isHighlighted:s}=e,d={root:["root",`series-${a}`,s&&"highlighted",r&&"faded"]};return be(d,ea,t)},ta=Re(Ae.path,{name:"MuiPieArc",slot:"Root",overridesResolver:(e,t)=>t.arc})(({theme:e})=>({stroke:(e.vars||e).palette.background.paper,strokeWidth:1,strokeLinejoin:"round"}));function na(e){const{classes:t,color:a,cornerRadius:r,dataIndex:s,endAngle:d,id:g,innerRadius:i,isFaded:m,isHighlighted:l,onClick:n,outerRadius:R,paddingAngle:u,startAngle:o}=e,A=q(e,Ze),x={id:g,dataIndex:s,classes:t,color:a,isFaded:m,isHighlighted:l},C=aa(x),h=He();return v.jsx(ta,F({d:Z([o,d,u,i,R,r],(f,p,P,y,L,w)=>ve().cornerRadius(w)({padAngle:P,startAngle:f,endAngle:p,innerRadius:y,outerRadius:L})),visibility:Z([o,d],(f,p)=>f===p?"hidden":"visible"),onClick:n,cursor:n?"pointer":"unset",ownerState:x,className:C.root},A,h({type:"pie",seriesId:g,dataIndex:s})))}const ia={keys:e=>e.id,from:({innerRadius:e,outerRadius:t,cornerRadius:a,startAngle:r,endAngle:s,paddingAngle:d,color:g,isFaded:i})=>({innerRadius:e,outerRadius:(e+t)/2,cornerRadius:a,startAngle:(r+s)/2,endAngle:(r+s)/2,paddingAngle:d,fill:g,opacity:i?.3:1}),leave:({innerRadius:e,startAngle:t,endAngle:a})=>({innerRadius:e,outerRadius:e,startAngle:(t+a)/2,endAngle:(t+a)/2}),enter:({innerRadius:e,outerRadius:t,startAngle:a,endAngle:r})=>({innerRadius:e,outerRadius:t,startAngle:a,endAngle:r}),update:({innerRadius:e,outerRadius:t,cornerRadius:a,startAngle:r,endAngle:s,paddingAngle:d,color:g,isFaded:i})=>({innerRadius:e,outerRadius:t,cornerRadius:a,startAngle:r,endAngle:s,paddingAngle:d,fill:g,opacity:i?.3:1}),config:{tension:120,friction:14,clamp:!0}},sa={keys:e=>e.id,from:({innerRadius:e,outerRadius:t,arcLabelRadius:a,cornerRadius:r,startAngle:s,endAngle:d,paddingAngle:g})=>({innerRadius:e,outerRadius:(e+t)/2,cornerRadius:r,arcLabelRadius:a,startAngle:(s+d)/2,endAngle:(s+d)/2,paddingAngle:g,opacity:0}),leave:({innerRadius:e,startAngle:t,endAngle:a})=>({innerRadius:e,outerRadius:e,arcLabelRadius:e,startAngle:(t+a)/2,endAngle:(t+a)/2,opacity:0}),enter:({innerRadius:e,outerRadius:t,startAngle:a,endAngle:r,arcLabelRadius:s})=>({innerRadius:e,outerRadius:t,startAngle:a,endAngle:r,arcLabelRadius:s,opacity:1}),update:({innerRadius:e,outerRadius:t,cornerRadius:a,startAngle:r,endAngle:s,paddingAngle:d,arcLabelRadius:g})=>({innerRadius:e,outerRadius:t,cornerRadius:a,startAngle:r,endAngle:s,paddingAngle:d,arcLabelRadius:g,opacity:1}),config:{tension:120,friction:14,clamp:!0}};function Ce(e){const{id:t,data:a,faded:r,highlighted:s,paddingAngle:d=0,innerRadius:g=0,arcLabelRadius:i,outerRadius:m,cornerRadius:l=0}=e,{isFaded:n,isHighlighted:R}=Pe();return _.useMemo(()=>a.map((o,A)=>{const x={seriesId:t,dataIndex:A},C=R(x),h=!C&&n(x),f=F({additionalRadius:0},h&&r||C&&s||{}),p=Math.max(0,Math.PI*(f.paddingAngle??d)/180),P=Math.max(0,f.innerRadius??g),y=Math.max(0,f.outerRadius??m+f.additionalRadius),L=f.cornerRadius??l,w=f.arcLabelRadius??i??(P+y)/2;return F({},o,f,{isFaded:h,isHighlighted:C,paddingAngle:p,innerRadius:P,outerRadius:y,cornerRadius:L,arcLabelRadius:w})}),[l,g,m,d,i,a,r,s,n,R,t])}const ra=["slots","slotProps","innerRadius","outerRadius","cornerRadius","paddingAngle","id","highlighted","faded","data","onItemClick","skipAnimation"],oa=["startAngle","endAngle","paddingAngle","innerRadius","arcLabelRadius","outerRadius","cornerRadius"];function da(e){const{slots:t,slotProps:a,innerRadius:r=0,outerRadius:s,cornerRadius:d=0,paddingAngle:g=0,id:i,highlighted:m,faded:l={additionalRadius:-5},data:n,onItemClick:R,skipAnimation:u}=e,o=q(e,ra),A=Ce({innerRadius:r,outerRadius:s,cornerRadius:d,paddingAngle:g,id:i,highlighted:m,faded:l,data:n}),x=Le(A,F({},ia,{immediate:u})),{highlightScope:C}=Pe();if(n.length===0)return null;const h=(t==null?void 0:t.pieArc)??na;return v.jsx("g",F({},o,{children:x((f,p,P,y)=>{let{startAngle:L,endAngle:w,paddingAngle:T,innerRadius:M,outerRadius:j,cornerRadius:I}=f,k=q(f,oa);return v.jsx(h,F({startAngle:L,endAngle:w,paddingAngle:T,innerRadius:M,outerRadius:j,cornerRadius:I,style:k,id:i,color:p.color,dataIndex:y,highlightScope:C,isFaded:p.isFaded,isHighlighted:p.isHighlighted,onClick:R&&(c=>{R(c,{type:"pie",seriesId:i,dataIndex:y},p)})},a==null?void 0:a.pieArc))})}))}const la=["id","classes","color","startAngle","endAngle","paddingAngle","arcLabelRadius","innerRadius","outerRadius","cornerRadius","formattedArcLabel","isHighlighted","isFaded","style"];function ua(e){return ye("MuiPieArcLabel",e)}xe("MuiPieArcLabel",["root","highlighted","faded"]);const ca=e=>{const{classes:t,id:a,isFaded:r,isHighlighted:s}=e,d={root:["root",`series-${a}`,s&&"highlighted",r&&"faded"]};return be(d,ua,t)},ga=Re(Ae.text,{name:"MuiPieArcLabel",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({fill:(e.vars||e).palette.text.primary,textAnchor:"middle",dominantBaseline:"middle",pointerEvents:"none"})),me=(e,t)=>(a,r,s,d,g)=>{if(!e)return 0;const[i,m]=ve().cornerRadius(g).centroid({padAngle:s,startAngle:a,endAngle:r,innerRadius:d,outerRadius:d});return t==="x"?i:m};function ha(e){const{id:t,classes:a,color:r,startAngle:s,endAngle:d,paddingAngle:g,arcLabelRadius:i,cornerRadius:m,formattedArcLabel:l,isHighlighted:n,isFaded:R,style:u}=e,o=q(e,la),x=ca({id:t,classes:a,color:r,isFaded:R,isHighlighted:n});return v.jsx(ga,F({className:x.root},o,{style:F({x:Z([s,d,g,i,m],me(l,"x")),y:Z([s,d,g,i,m],me(l,"y"))},u),children:l}))}const fa=["arcLabel","arcLabelMinAngle","arcLabelRadius","cornerRadius","data","faded","highlighted","id","innerRadius","outerRadius","paddingAngle","skipAnimation","slotProps","slots"],ma=["startAngle","endAngle","paddingAngle","innerRadius","outerRadius","arcLabelRadius","cornerRadius"],pa=180/Math.PI;function Ra(e,t,a){var s;if(!e||(a.endAngle-a.startAngle)*pa<t)return null;switch(e){case"label":return fe(a.label,"arc");case"value":return(s=a.value)==null?void 0:s.toString();case"formattedValue":return a.formattedValue;default:return e(F({},a,{label:fe(a.label,"arc")}))}}function xa(e){const{arcLabel:t,arcLabelMinAngle:a=0,arcLabelRadius:r,cornerRadius:s=0,data:d,faded:g={additionalRadius:-5},highlighted:i,id:m,innerRadius:l,outerRadius:n,paddingAngle:R=0,skipAnimation:u,slotProps:o,slots:A}=e,x=q(e,fa),C=Ce({innerRadius:l,outerRadius:n,arcLabelRadius:r,cornerRadius:s,paddingAngle:R,id:m,highlighted:i,faded:g,data:d}),h=Le(C,F({},sa,{immediate:u}));if(d.length===0)return null;const f=(A==null?void 0:A.pieArcLabel)??ha;return v.jsx("g",F({},x,{children:h((p,P)=>{let{startAngle:y,endAngle:L,paddingAngle:w,innerRadius:T,outerRadius:M,arcLabelRadius:j,cornerRadius:I}=p,k=q(p,ma);return v.jsx(f,F({startAngle:y,endAngle:L,paddingAngle:w,innerRadius:T,outerRadius:M,arcLabelRadius:j,cornerRadius:I,style:k,id:m,color:P.color,isFaded:P.isFaded,isHighlighted:P.isHighlighted,formattedArcLabel:Ra(t,a,P)},o==null?void 0:o.pieArcLabel))})}))}function pe(e,t){const{height:a,width:r}=t,{cx:s,cy:d}=e,g=Math.min(r,a)/2,i=W(s??"50%",r),m=W(d??"50%",a);return{cx:i,cy:m,availableRadius:g}}function Aa(e){const{skipAnimation:t,slots:a,slotProps:r,onItemClick:s}=e,d=Se(),{left:g,top:i,width:m,height:l}=_.useContext($e),n=Ee(t);if(d===void 0)return null;const{series:R,seriesOrder:u}=d;return v.jsxs("g",{children:[u.map(o=>{const{innerRadius:A,outerRadius:x,cornerRadius:C,paddingAngle:h,data:f,cx:p,cy:P,highlighted:y,faded:L}=R[o],{cx:w,cy:T,availableRadius:M}=pe({cx:p,cy:P},{width:m,height:l}),j=W(x??M,M),I=W(A??0,M);return v.jsx("g",{transform:`translate(${g+w}, ${i+T})`,children:v.jsx(da,{innerRadius:I,outerRadius:j,cornerRadius:C,paddingAngle:h,id:o,data:f,skipAnimation:n,highlighted:y,faded:L,onItemClick:s,slots:a,slotProps:r})},o)}),u.map(o=>{const{innerRadius:A,outerRadius:x,arcLabelRadius:C,cornerRadius:h,paddingAngle:f,arcLabel:p,arcLabelMinAngle:P,data:y,cx:L,cy:w}=R[o],{cx:T,cy:M,availableRadius:j}=pe({cx:L,cy:w},{width:m,height:l}),I=W(x??j,j),k=W(A??0,j),c=C===void 0?(I+k)/2:W(C,j);return v.jsx("g",{transform:`translate(${g+T}, ${i+M})`,children:v.jsx(xa,{innerRadius:k,outerRadius:I??j,arcLabelRadius:c,cornerRadius:h,paddingAngle:f,id:o,data:y,skipAnimation:n,arcLabel:p,arcLabelMinAngle:P,slots:a,slotProps:r})},o)})]})}const ba=["xAxis","yAxis","series","width","height","margin","colors","sx","tooltip","axisHighlight","skipAnimation","legend","topAxis","leftAxis","rightAxis","bottomAxis","children","slots","slotProps","onItemClick","loading","highlightedItem","onHighlightChange","className"],ya={top:5,bottom:5,left:5,right:100},Pa={top:5,bottom:5,left:100,right:5},La=_.forwardRef(function(t,a){const r=Ne({props:t,name:"MuiPieChart"}),{xAxis:s,yAxis:d,series:g,width:i,height:m,margin:l,colors:n,sx:R,tooltip:u={trigger:"item"},axisHighlight:o={x:"none",y:"none"},skipAnimation:A,legend:x,topAxis:C=null,leftAxis:h=null,rightAxis:f=null,bottomAxis:p=null,children:P,slots:y,slotProps:L,onItemClick:w,loading:T,highlightedItem:M,onHighlightChange:j,className:I}=r,k=q(r,ba),c=je(),b=F({},c?Pa:ya,l),$=F({direction:"column",position:{vertical:"middle",horizontal:c?"left":"right"}},x);return v.jsxs(Be,F({},k,{ref:a,series:g.map(E=>F({type:"pie"},E)),width:i,height:m,margin:b,xAxis:s??[{id:Ue,scaleType:"point",data:[...new Array(Math.max(...g.map(E=>E.data.length)))].map((E,B)=>B)}],yAxis:d,colors:n,sx:R,disableAxisListener:(u==null?void 0:u.trigger)!=="axis"&&(o==null?void 0:o.x)==="none"&&(o==null?void 0:o.y)==="none",highlightedItem:M,onHighlightChange:j,className:I,skipAnimation:A,children:[v.jsx(_e,{topAxis:C,leftAxis:h,rightAxis:f,bottomAxis:p,slots:y,slotProps:L}),v.jsx(Aa,{slots:y,slotProps:L,onItemClick:w}),v.jsx(Oe,{loading:T,slots:y,slotProps:L}),v.jsx(We,F({},$,{slots:y,slotProps:L})),v.jsx(qe,F({},o)),!T&&v.jsx(Xe,F({},u,{slots:y,slotProps:L})),P]}))}),va=e=>`${e.value}%`;function Ca(){const[e,t]=_.useState([]),a=async()=>{const{data:{user:s}}=await J.auth.getUser(),d=s==null?void 0:s.id,{data:g,error:i}=await J.from("budgets").select("budget_name, budget_amount").eq("user_id",d);if(i)console.error("Error fetching budget data:",i);else{const m=g.map(l=>({label:l.budget_name,value:parseFloat(l.budget_amount)}));t(m)}};_.useEffect(()=>{a()},[]);const r={height:200,margin:{right:5},slotProps:{legend:{hidden:!0}}};return v.jsx(La,{series:[{data:e,highlightScope:{fade:"global",highlight:"item"},faded:{innerRadius:30,additionalRadius:-30,color:"gray"},valueFormatter:va}],...r})}const Ha=e=>`${e.value}%`;function Sa(){const[e,t]=_.useState([]),[a,r]=_.useState([]),s=[{id:"id",numeric:!0,disablePadding:!1,label:"Budget ID"},{id:"budget_name",numeric:!1,disablePadding:!1,label:"Budget Name"},{id:"budget_amount",numeric:!0,disablePadding:!1,label:"Allocated Amount"},{id:"start_date",numeric:!1,disablePadding:!1,label:"Start Date"},{id:"end_date",numeric:!1,disablePadding:!1,label:"End Date"}],d=async()=>{const{data:{user:g}}=await J.auth.getUser(),i=g==null?void 0:g.id,{data:m,error:l}=await J.from("budgets").select("*").eq("user_id",i);if(l)console.error("Error fetching budgets data:",l);else{t(m);const n=budgets.map(R=>({label:R.budget_name,value:parseFloat(R.budget_amount)}));r(n)}};return _.useEffect(()=>{d()},[]),v.jsx(Ie,{title:"Budget Data",children:v.jsxs(re,{container:!0,spacing:1,children:[v.jsx(re,{item:!0,xs:10,md:7,children:e.length>0?v.jsx(Ve,{rows:e,headCells:s,title:"Budgets"}):v.jsx(we,{variant:"body2",children:"No data available"})}),v.jsx(re,{item:!0,xs:12,md:5,children:v.jsx(ke,{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",children:v.jsx(Ca,{})})})]})})}export{Sa as default,Ha as valueFormatter};
